---
import BaseLayout from '../layouts/BaseLayout.astro';
import RecipeCard from '../components/RecipeCard.astro';

const recipes = Object.entries(
  import.meta.glob('../data/recipes/*.md', { eager: true })
).map(([path, module]) => {
  const slug = path.split('/').pop().replace('.md', '');
  return {
    slug,
    ...module.frontmatter,
  };
});
---

<BaseLayout>
  <section class="max-w-5xl mx-auto py-12 px-4">
    <h1 class="text-3xl font-bold mb-8 text-center">Katalog recepata</h1>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
      {recipes.map(recipe => (
        <RecipeCard 
          title={recipe.title} 
          image={recipe.image} 
          slug={recipe.slug} 
          tags={recipe.tags} 
        />
      ))}
    </div>
  </section>
</BaseLayout>